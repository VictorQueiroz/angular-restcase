/**
 * angular-restcase - 
 * @version v0.0.2
 * @link https://github.com/VictorQueiroz/angular-restcase
 * @license MIT
 */
(function () {
function $RestcaseProvider(){function e(e){function i(e){return"{"+e+"}"}function n(e){return e+"s"}function a(e,t){var r=e,n=e.match(url_resolve_regexp),a=n?n.map(function(e){var t=/[\{\}]/g;return e.replace(t,"")}):[];return _.forEach(t,function(e,t){-1!==a.indexOf(t)&&(r=r.replace(i(t),e))}),_.forEach(a,function(e){var n=t[e];(_.isUndefined(n)||_.isEmpty(n))&&(r=r.replace(i(e),""))}),r=r.replace(/(\/)+$/,"")}var s={},o=Restcase.Model.extend(r).extend({getUrl:function(){return this.url},hasMany:function(e,r,s){var o=e.prototype.modelName.toLowerCase(),u=t.apiPrefix+"/"+this.modelName.toLowerCase()+"/"+i(this.idAttribute)+"/"+n(o);u=a(u,this.attributes);var d=e.extend({url:u}),c={};_.isUndefined(r)&&(r=this.modelName+"_id"),c[r]=this.get(this.idAttribute);var f=new d(c);return f.fetch()},initialize:function(){var t=this,i=this.attributes,n=this.getUrl();_.forEach(this.methods,function(s,o){var u=_.extend({},r.methodDefaults,s);this[o]=function(){var r;"save"!==o||t.isNew()||(u.method="PATCH"),angular.isDefined(o.url)?r=o.url:angular.isDefined(n)&&(r=n),u.url=a(r,i);var s=e(u).then(function(e){return e.data});return s.then(function(e){return _.isArray(e)||"fetch"!==o&&"save"!==o?(_.isArray(e)&&(e=e.map(function(e){var r=t.clone();return r.set(e),r})),e):(_.isObject(e)&&!_.isUndefined(e[t.idAttribute])&&t.set(e),t)})}},this)}});return s.Model=o,s}if(angular.isUndefined(Restcase))throw new Error("You must load Restcase before load this module, aborting");this.$get=e;var t=this.defaults={apiPrefix:"/api"},r=this.defaults.modelDefaults={idAttribute:"id",methodDefaults:{method:"GET"},methods:{fetch:{method:"GET"},destroy:{method:"DELETE"},save:{method:"POST"}}};e.$inject=["$http"]}var url_resolve_regexp=/(?:\{)(\w)+(?:\})/g;angular.module("victorqueiroz.ngRestcase",[]).provider("$restcase",$RestcaseProvider);
});